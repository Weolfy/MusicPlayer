import{d as G,k as H,u as J,a as K,D as Q,C as F,l as b,r as k,o as a,c as m,e as s,b as c,w as d,t as v,s as p,g as W,i as Z,q as L,z as ee,M as D}from"./index.9d28bcd9.js";import{g as f}from"./play.63f47cb8.js";import{_ as le}from"./plugin-vue_export-helper.21dcd24c.js";const te={class:"table"},ue={class:"buttons"},ne={style:{display:"flex","align-items":"center","justify-content":"space-between"}},oe={class:"num"},se=["onClick"],ie=["onClick"],re=["title"],ce={key:0,class:"noCopyright"},ae={key:1},me={key:2,class:"trialTags"},de={key:3,class:"trialTags"},ve=["title","onClick"],pe=["title","onClick"],fe={class:"rClickMenu"},ge=G({props:["dataList"],setup(x){const B=x;H();const g=J(),o=K();let{dataList:l}=Q(B);const w=e=>{let u=new Date(e),t=u.getMinutes();t=t<10?"0"+t:t;let i=u.getSeconds();return i=i<10?"0"+i:i,t+":"+i},C=e=>e.privilege?e.privilege.cp===0:!1,S=e=>e.privilege?e.fee==1&&e.privilege.cp!=0:e.fee==1&&e.copyright!=0,_=e=>e.privilege?e.fee==1&&e.privilege.cp==0:e.fee==1&&e.copyright==0,E=e=>{if(C(e)||_(e)){D({message:"\u8BE5\u6B4C\u66F2\u56E0\u7248\u6743\u6216\u4F1A\u5458\u539F\u56E0\uFF0C\u6682\u65F6\u65E0\u6CD5\u64AD\u653E\uFF0C\u656C\u8BF7\u8C05\u89E3",offset:250,duration:2e3,customClass:"cpMessage"});let u=document.querySelectorAll(".cpMessage.el-message");if(u)for(let t=0;t<u.length;t++)u[t].style.cssText=" --el-message-bg-color: #000; --el-message-border-color: #000; --el-message-text-color: #ec4141;";return}f(e.id).then(u=>{let t=u.data[0].url;o.commit("setCurrentUrl",t),o.commit("pushRecent",{id:e.id,title:e.name,artist:e.ar,type:"\u6B4C\u66F2",time:+new Date,url:t}),o.commit("pushCurrentPlaylist",{id:e.id,title:e.name,artist:e.ar,from:"\u8BE6\u60C5",duration:e.dt,url:t}),o.commit("setCurrentSongId",e.id)})},A=e=>{g.push("/detail/artist/"+e)},M=e=>{g.push("/detail/album/"+e)},I=e=>{g.push("/detail/song/"+e)},R=e=>{if(e.privilege.cp==0)return;let u={id:e.id,title:e.name,artist:e.ar,album:e.al,duration:e.dt};o.commit("pushFav",u)},P=e=>{o.commit("removeFav",e)};let T=F(()=>o.getters.getFav);const $=F(()=>function(e){return T.value.some(t=>t.id==e)});let h=b(!1),r=b();const V=(e,u,t)=>{q(),t.preventDefault();let i=document.querySelector(".rClickMenu");i.style.top=(e.no-1)*30+t.offsetY+53+"px",i.style.left=t.offsetX+74+"px",r.value=e},q=()=>{h.value=!0},N=()=>{h.value=!1},U=(e,u,t)=>{let i=document.querySelector(".rClickMenu");t.path.includes(i)||N()},O=()=>{E(r.value)},j=()=>{if(C(r.value)||_(r.value)){D({message:"\u8BE5\u6B4C\u66F2\u56E0\u7248\u6743\u6216\u4F1A\u5458\u539F\u56E0\uFF0C\u6682\u65F6\u65E0\u6CD5\u64AD\u653E\uFF0C\u656C\u8BF7\u8C05\u89E3",offset:250,duration:2e3,customClass:"cpMessage"});let e=document.querySelectorAll(".cpMessage.el-message");if(e)for(let u=0;u<e.length;u++)e[u].style.cssText=" --el-message-bg-color: #000; --el-message-border-color: #000; --el-message-text-color: #ec4141;";return}f(r.value.id).then(e=>{let u=e.data[0].url;o.commit("pushCurrentPlaylist",{id:r.value.id,title:r.value.title,artist:r.value.artist,from:"\u641C\u7D22",duration:r.value.duration,url:u})})},z=async()=>{o.commit("clearPlaylist");for(let e=0;e<(l==null?void 0:l.value.length);e++){if(l!=null&&l.value[e].privilege){if((l==null?void 0:l.value[e].privilege.cp)==0)continue}else if((l==null?void 0:l.value[e].fee)==1&&(l==null?void 0:l.value[e].copyright)==0)continue;let t=(await f(l==null?void 0:l.value[e].id)).data[0].url;o.commit("pushCurrentPlaylistOrder",{id:l==null?void 0:l.value[e].id,title:l==null?void 0:l.value[e].name,artist:l==null?void 0:l.value[e].ar,from:"\u8BE6\u60C5",duration:l==null?void 0:l.value[e].dt,url:t}),e==0&&(o.commit("setCurrentUrl",t),o.commit("pushRecent",{id:l==null?void 0:l.value[e].id,title:l==null?void 0:l.value[e].name,artist:l==null?void 0:l.value[e].ar,type:"\u6B4C\u66F2",time:+new Date}),o.commit("setCurrentSongId",l==null?void 0:l.value[e].id))}},X=async()=>{for(let e=0;e<(l==null?void 0:l.value.length);e++){if(l!=null&&l.value[e].privilege){if((l==null?void 0:l.value[e].privilege.cp)==0)continue}else if((l==null?void 0:l.value[e].fee)==1&&(l==null?void 0:l.value[e].copyright)==0)continue;let t=(await f(l==null?void 0:l.value[e].id)).data[0].url;o.commit("pushCurrentPlaylistOrder",{id:l==null?void 0:l.value[e].id,title:l==null?void 0:l.value[e].name,artist:l==null?void 0:l.value[e].ar,from:"\u8BE6\u60C5",duration:l==null?void 0:l.value[e].dt,url:t})}};return(e,u)=>{const t=k("el-table-column"),i=k("el-progress"),Y=k("el-table");return a(),m("div",te,[s("div",ue,[s("div",{class:"button",onClick:u[0]||(u[0]=n=>z())},"\u5168\u90E8\u64AD\u653E"),s("div",{class:"button",onClick:u[1]||(u[1]=n=>X())},"\u6DFB\u52A0\u5230\u64AD\u653E\u5217\u8868")]),c(Y,{data:p(l),stripe:"",style:{width:"100%"},"header-row-class-name":"tableheader",onRowDblclick:E,onRowContextmenu:V,onRowClick:U},{default:d(()=>[c(t,{type:"index",index:1,width:"35"}),c(t,{label:"",width:"30",class:"icon"},{default:d(n=>[s("div",ne,[s("span",oe,v(n.row.index<10?"0"+n.row.index:n.row.index),1),p($)(n.row.id)?(a(),m("i",{key:1,id:"loveIcon",class:"iconfont icon-aixin",title:"\u53D6\u6D88\u559C\u6B22",onClick:y=>P(n.row.id)},null,8,ie)):(a(),m("i",{key:0,id:"loveIcon",class:"iconfont icon-aixin1-copy",title:"\u559C\u6B22",onClick:y=>R(n.row)},null,8,se))])]),_:1}),c(t,{label:"\u97F3\u4E50\u6807\u9898",width:"230",class:"title"},{default:d(n=>[s("div",{title:n.row.name},[C(n.row)?(a(),m("div",ce,v(n.row.name),1)):(a(),m("div",ae,v(n.row.name),1)),S(n.row)?(a(),m("span",me,"\u8BD5\u542C")):_(n.row)?(a(),m("span",de,"VIP")):W("",!0)],8,re)]),_:1}),c(t,{label:"\u6B4C\u624B",width:"100","class-name":"artist"},{default:d(n=>[s("div",{title:n.row.ar[0].name,onClick:y=>A(n.row.ar[0].id)},v(n.row.ar[0].name),9,ve)]),_:1}),c(t,{label:"\u4E13\u8F91",width:"140","class-name":"album"},{default:d(n=>[s("div",{title:n.row.al.name,onClick:y=>M(n.row.al.id)},v(n.row.al.name),9,pe)]),_:1}),c(t,{label:"\u65F6\u957F",width:"60",class:"duration"},{default:d(n=>[Z(v(w(n.row.dt)),1)]),_:1}),c(t,{label:"\u70ED\u5EA6",class:"hot"},{default:d(n=>[c(i,{percentage:n.row.pop,"show-text":!1,color:"#c8c8c8"},null,8,["percentage"])]),_:1})]),_:1},8,["data"]),L(s("div",fe,[s("ul",null,[s("li",{class:"menuItem",onClick:u[2]||(u[2]=n=>I(p(r).id))},"\u67E5\u770B\u8BE6\u60C5"),s("li",{class:"menuItem",onClick:O},"\u64AD\u653E"),s("li",{class:"menuItem",onClick:j},"\u4E0B\u4E00\u9996\u64AD\u653E")])],512),[[ee,p(h)]])])}}});var ye=le(ge,[["__scopeId","data-v-589f3cc2"]]);export{ye as S};
