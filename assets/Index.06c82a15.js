var Re=Object.defineProperty;var Ne=(m,t,s)=>t in m?Re(m,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):m[t]=s;var he=(m,t,s)=>(Ne(m,typeof t!="symbol"?t+"":t,s),s);import{d as M,u as ae,a as oe,r as x,o,c as u,b as h,w as $,e,F as V,f as J,t as S,g as z,h as Te,i as re,p as de,j as _e,k as fe,l as y,m as Q,n as ve,q as j,v as Ve,s as _,x as ce,y as Me,z as Y,A as G,B as Oe,C as H,D as He,E as Je,G as ze,H as Ke,I as se,J as je,K as qe}from"./index.9d28bcd9.js";import{a as X}from"./request.f1cfeff7.js";import{g as We,a as Xe,b as Ye,c as Ge,s as ge,d as Qe}from"./search.691388bb.js";import{g as ye}from"./play.63f47cb8.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import{g as Ze}from"./getDetail.d11e6370.js";import{d as et}from"./default.2e3a4730.js";class tt{constructor(){he(this,"use",t=>{let s;return()=>new Promise((a,g)=>{s&&clearTimeout(s),s=setTimeout(()=>{a(),s=void 0},t)})})}}const Ce=m=>(de("data-v-2c06f574"),m=m(),_e(),m),lt={class:"popoverLayout"},st={key:0,class:"hotSearch"},at=Ce(()=>e("div",{class:"title"},"\u70ED\u641C\u699C",-1)),ot={class:"rank"},nt=["onClick"],it={class:"index"},ut={class:"info"},rt={class:"titleAndHot"},ct={class:"ranktitle"},dt={class:"hot"},_t={key:0,class:"desc"},vt={key:1,class:"searchSuggest"},mt={class:"guess"},pt=Ce(()=>e("div",{class:"guessTitle"}," \u731C\u4F60\u60F3\u641C ",-1)),ht=["onClick"],gt={class:"typeTitle"},ft={class:"suggestItem"},yt=["onClick"],Ct={key:0,class:"transNames"},kt=["onClick"],St=["onClick"],wt=["onClick"],Lt=M({props:["dataList","guessList","suggestList","state"],emits:["itemClicked","hide"],setup(m,{emit:t}){const s=ae(),a=oe(),g=v=>{t("itemClicked",v)},F=v=>{switch(v){case"songs":return"\u5355\u66F2";case"artists":return"\u6B4C\u624B";case"albums":return"\u4E13\u8F91";case"playlists":return"\u6B4C\u5355"}},p=v=>{t("hide"),ye(v.id).then(B=>{let w=B.data[0].url;a.commit("setCurrentUrl",w),a.commit("pushRecent",{id:v.id,title:v.name,artist:v.artists,type:"\u6B4C\u66F2",time:+new Date,url:w}),a.commit("pushCurrentPlaylist",{id:v.id,title:v.name,artist:v.artists,from:"\u641C\u7D22",duration:v.duration,url:w}),a.commit("setCurrentSongId",v.id)})},D=v=>{t("hide"),s.push("/detail/artist/"+v)},C=v=>{t("hide"),s.push("/detail/album/"+v)},l=v=>{t("hide"),s.push("/detail/songlist/"+v)};return(v,B)=>{const w=x("el-scrollbar");return o(),u("div",lt,[m.state?(o(),u("div",st,[h(w,null,{default:$(()=>[at,e("ul",ot,[(o(!0),u(V,null,J(m.dataList,(f,i)=>(o(),u("li",{class:"rankItem",key:f.searchWord,onClick:b=>g(f.searchWord)},[e("div",it,S(i+1),1),e("div",ut,[e("div",rt,[e("div",ct,S(f.searchWord),1),e("div",dt,S(f.score),1)]),f.content?(o(),u("div",_t,S(f.content),1)):z("",!0)])],8,nt))),128))])]),_:1})])):(o(),u("div",vt,[h(w,null,{default:$(()=>[e("ul",mt,[pt,(o(!0),u(V,null,J(m.guessList,f=>(o(),u("li",{class:"guessItem",onClick:i=>g(f.keyword)},S(f.keyword),9,ht))),256))]),(o(!0),u(V,null,J(m.suggestList.order,f=>(o(),u("ul",{class:"result",key:f},[e("div",gt,S(F(f)),1),(o(!0),u(V,null,J(m.suggestList[f],i=>(o(),u("li",ft,[f=="songs"?(o(),u("div",{key:0,class:"songItem",onClick:Te(b=>p(i),["stop"])},[re(S(i.name)+" ",1),i.transNames?(o(),u("span",Ct," ("+S(i.transNames[0])+") ",1)):z("",!0),re(" - "+S(i.artists[0].name),1)],8,yt)):f=="artists"?(o(),u("div",{key:1,class:"artistItem",onClick:b=>D(i.id)},S(i.name),9,kt)):f=="albums"?(o(),u("div",{key:2,class:"albumItem",onClick:b=>C(i.id)},S(i.name)+" - "+S(i.artist.name),9,St)):f=="playlists"?(o(),u("div",{key:3,class:"songlistItem",onClick:b=>l(i.id)},S(i.name),9,wt)):z("",!0)]))),256))]))),128))]),_:1})]))])}}});var bt=O(Lt,[["__scopeId","data-v-2c06f574"]]);const xt={class:"searchbar"},$t={id:"searchSong"},Ft=["onKeyup","placeholder"],Dt={class:"menuPopover"},Bt=M({setup(m){fe();const t=ae(),s=oe();let a=y(""),g=y(""),F=y([]),p=y([]),D=y([]),C=y(!1),l=y(!0);const v=()=>{if(f(),a.value===""){ge(g.value).then(d=>{t.push("/search/result/song/"+g.value),s.commit("setSongResult",d.result.songs),s.commit("setSongCount",d.result.songCount),s.commit("changeStatus")});return}ge(a.value).then(d=>{t.push("/search/result/song/"+a.value),s.commit("setSongResult",d.result.songs),s.commit("setSongCount",d.result.songCount),s.commit("changeStatus")})},B=d=>{a.value=d,v()};Q(()=>{X.all([We(),Xe()]).then(X.spread((d,A)=>{g.value=A.data.realkeyword,F.value=d.data}))});const w=()=>{C.value=!0},f=()=>{C.value=!1};let i=new tt().use(500);const b=()=>{t.go(1)},P=()=>{t.back()};ve(()=>a.value,()=>{a.value?(l.value=!1,i().then(()=>{U()})):l.value=!0});const U=()=>{a.value!==""&&X.all([Ye(a.value),Ge(a.value)]).then(X.spread((d,A)=>{p.value=d.result.allMatch,D.value=A.result}))};return document.addEventListener("mousedown",d=>{let A=document.getElementsByClassName("menuPopover")[0],R=document.querySelector("#searchSong");d.path.includes(A)||d.path.includes(R)||f()}),(d,A)=>{const R=x("ArrowLeft"),q=x("el-icon"),Z=x("el-button"),ee=x("ArrowRight"),ne=x("Search");return o(),u("div",xt,[h(Z,{circle:"",size:"small",class:"btn",color:"#d93b3b",onClick:P},{default:$(()=>[h(q,null,{default:$(()=>[h(R)]),_:1})]),_:1}),h(Z,{circle:"",size:"small",class:"btn",color:"#d93b3b",onClick:b},{default:$(()=>[h(q,null,{default:$(()=>[h(ee)]),_:1})]),_:1}),e("div",$t,[h(q,{color:"white",id:"searchbtn",onClick:v},{default:$(()=>[h(ne)]),_:1}),j(e("input",{type:"text","onUpdate:modelValue":A[0]||(A[0]=I=>ce(a)?a.value=I:a=I),onKeyup:Me(v,["enter"]),placeholder:_(g),onFocus:w},null,40,Ft),[[Ve,_(a)]])]),e("div",Dt,[j(h(bt,{dataList:_(F),onItemClicked:B,onHide:f,state:_(l),guessList:_(p),suggestList:_(D)},null,8,["dataList","state","guessList","suggestList"]),[[Y,_(C)]])])])}}});var Et=O(Bt,[["__scopeId","data-v-630638d0"]]),It="./assets/logo.35204645.png";const Pt={},At=m=>(de("data-v-725696ba"),m=m(),_e(),m),Ut={id:"logo"},Rt=At(()=>e("img",{src:It,alt:"TheLogo"},null,-1)),Nt=re(" \u4E91 \u97F3 \u4E50 "),Tt=[Rt,Nt];function Vt(m,t){return o(),u("div",Ut,Tt)}var Mt=O(Pt,[["render",Vt],["__scopeId","data-v-725696ba"]]);const Ot={class:"headerComp"},Ht=M({setup(m){return(t,s)=>(o(),u("div",Ot,[h(Mt),h(Et)]))}});var Jt=O(Ht,[["__scopeId","data-v-d092cfe2"]]);const zt=M({props:["itemList"],setup(m){const t=ae(),s=a=>{t.push(a)};return(a,g)=>{const F=x("SidebarItem",!0),p=x("el-sub-menu"),D=x("el-menu-item");return o(!0),u(V,null,J(m.itemList,C=>(o(),u(V,{key:C.path},[C.children&&C.children.length>0?(o(),G(p,{key:0,index:C.path},{title:$(()=>[e("span",null,S(C.meta.title),1)]),default:$(()=>[h(F,{itemList:C.children},null,8,["itemList"])]),_:2},1032,["index"])):(o(),G(D,{key:1,index:C.path,onClick:l=>s(C.path)},{title:$(()=>[e("span",null,S(C.meta.title),1)]),_:2},1032,["index","onClick"]))],64))),128)}}});const Kt=M({setup(m){const t=fe();let s=Oe([{path:"/discover",component:"",meta:{title:"\u53D1\u73B0\u97F3\u4E50"},children:[]},{path:"/radio",component:"",meta:{title:"\u7535\u53F0"},children:[]},{path:"/video",component:"",meta:{title:"\u89C6\u9891"},children:[]},{path:"/privatefm",component:"",meta:{title:"\u79C1\u4EBAFM"},children:[]},{path:"/mymusic",component:"",meta:{title:"\u6211\u7684\u97F3\u4E50"},children:[{path:"/mymusic/recent",component:"",meta:{title:"\u6700\u8FD1\u64AD\u653E"}},{path:"/mymusic/mycollection",component:"",meta:{title:"\u6211\u7684\u6536\u85CF"}}]},{path:"/mysonglists",component:"",meta:{title:"\u521B\u5EFA\u7684\u6B4C\u5355"},children:[{path:"/mysonglists/myfavourite",component:"",meta:{title:"\u6211\u559C\u6B22\u7684\u97F3\u4E50"}}]}]);const a=H(()=>{const{meta:g}=t;return g.from});return(g,F)=>{const p=x("el-menu"),D=x("el-scrollbar");return o(),G(D,null,{default:$(()=>[h(p,{"active-text-color":"#000000","background-color":"#fff",class:"el-menu-vertical-demo","default-active":_(a),"default-openeds":["/mymusic","/mysonglists"]},{default:$(()=>[h(zt,{itemList:_(s)},null,8,["itemList"])]),_:1},8,["default-active"])]),_:1})}}});var jt=O(Kt,[["__scopeId","data-v-3d31e0d7"]]);const qt={class:"lyricsLayout"},Wt={class:"line"},Xt={key:0},Yt=M({props:["dataList"],setup(m){const t=m;let{dataList:s}=He(t),a,g=y(),F=y(""),p=y(!1);const D=l=>{if(l=="")return F.value="\u6682\u65E0\u6B4C\u8BCD","noLyrics";{let v=l.split(`
`),B=/\[\d{2}:\d{2}.\d{2,3}\]/g,w={},f=[],i=[];return v[v.length-1].length===0&&v.pop(),v.forEach((b,P,U)=>{let d=b.match(B),A=b.replace(B,"");A=="\u7EAF\u97F3\u4E50\uFF0C\u8BF7\u6B23\u8D4F"&&(p.value=!0);let R=d[0].slice(1,-1).split(":");f.push(parseInt(R[0],10)*60+parseFloat(R[1])),i.push(A)}),w={timeline:f,lyricsline:i},w}},C=()=>{for(let l=0;l<g.value.timeline.length;l++)a.currentTime>g.value.timeline[l]&&a.currentTime<g.value.timeline[l+1]&&(F.value=g.value.lyricsline[l])};return Q(()=>{a=document.querySelector("#originplayer"),a.addEventListener("ended",()=>{p.value=!1,a.removeEventListener("timeupdate",C),F.value=""})}),ve(()=>s==null?void 0:s.value,()=>{g.value=D(s==null?void 0:s.value),g.value!=="noLyrics"&&a.addEventListener("timeupdate",C)}),(l,v)=>(o(),u("div",qt,[e("div",Wt,S(_(F)),1),_(p)?(o(),u("div",Xt," \u7EAF\u97F3\u4E50\uFF0C\u8BF7\u6B23\u8D4F ")):z("",!0)]))}});var Gt=O(Yt,[["__scopeId","data-v-6777e6f6"]]);const me=m=>(de("data-v-227966da"),m=m(),_e(),m),Qt=["src"],Zt={class:"customPlayer"},el={class:"info"},tl={class:"cover"},ll=["src"],sl={class:"tA"},al=["title"],ol={key:0,class:"artists"},nl={key:0},il=["title"],ul={key:0},rl=["title"],cl={class:"like"},dl={class:"playerControl"},_l={class:"buttons"},vl={class:"state"},ml=me(()=>e("i",{class:"iconfont icon-shangyishou",title:"\u4E0A\u4E00\u9996"},null,-1)),pl=[ml],hl={key:0,class:"iconfont icon-bofang",id:"play",title:"\u64AD\u653E"},gl={key:1,class:"iconfont icon-zanting",id:"pause",title:"\u6682\u505C"},fl=me(()=>e("i",{class:"iconfont icon-xiayishou",title:"\u4E0B\u4E00\u9996"},null,-1)),yl=[fl],Cl={class:"progressBar"},kl={class:"currentTime"},Sl={class:"bar"},wl={class:"totalTime"},Ll={class:"otherOptions"},bl={class:"volume"},xl={class:"volumeControl"},$l={class:"download"},Fl=["href"],Dl=me(()=>e("i",{class:"iconfont icon-bofangliebiao",title:"\u64AD\u653E\u5217\u8868"},null,-1)),Bl=[Dl],El={class:"lyricPanel"},Il=M({setup(m){const t=oe();let s=H(()=>t.getters.getCurrentUrl),a=H(()=>t.getters.getCurrentSongId),g=y(""),F=y(et),p=y([]),D=y(),C=y(0),l=H(()=>t.getters.getCurrentPlaylist),v=y(),B=y(!1),w,f=y(!1),i=H(()=>t.getters.getFav);const b=H(()=>function(r){return i.value.some(c=>c.id==r)}),P=()=>{let r={id:a.value,title:g.value,artist:p.value,album:D.value,duration:C.value};t.commit("pushFav",r)},U=r=>{t.commit("removeFav",r)};let d=y(!1);const A=()=>{l.value.length!=0&&(d.value=!0,L.play())},R=()=>{d.value=!1,L.pause()},q=()=>{d.value===!0?R():A()},Z=()=>{if(l.value.length==0)return;let r=l.value.filter(k=>k.id==a.value),n=l.value.indexOf(r[0]),c=l.value.length;if(n==0){let k=l.value[c-1].url;t.commit("setCurrentUrl",k),t.commit("pushRecent",{id:l.value[c-1].id,title:l.value[c-1].title,artist:l.value[c-1].artist,type:"\u6B4C\u66F2",time:+new Date,url:k}),t.commit("setCurrentSongId",l.value[c-1].id)}else{let k=l.value[n-1].url;t.commit("setCurrentUrl",k),t.commit("pushRecent",{id:l.value[n-1].id,title:l.value[n-1].title,artist:l.value[n-1].artist,type:"\u6B4C\u66F2",time:+new Date,url:k}),t.commit("setCurrentSongId",l.value[n-1].id)}},ee=()=>{if(l.value.length==0)return;let r=l.value.filter(c=>c.id==a.value),n=l.value.indexOf(r[0]);if(n+1==l.value.length){let c=l.value[0].url;t.commit("setCurrentUrl",c),t.commit("pushRecent",{id:l.value[0].id,title:l.value[0].title,artist:l.value[0].artist,type:"\u6B4C\u66F2",time:+new Date,url:c}),t.commit("setCurrentSongId",l.value[0].id)}else{let c=l.value[n+1].url;t.commit("setCurrentUrl",c),t.commit("pushRecent",{id:l.value[n+1].id,title:l.value[n+1].title,artist:l.value[n+1].artist,type:"\u6B4C\u66F2",time:+new Date,url:c}),t.commit("setCurrentSongId",l.value[n+1].id)}},ne=()=>{let r=Math.floor(Math.random()*l.value.length);console.log(r);let n=l.value[r].url;t.commit("setCurrentUrl",n),t.commit("pushRecent",{id:l.value[r].id,title:l.value[r].title,artist:l.value[r].artist,type:"\u6B4C\u66F2",time:+new Date,url:n}),t.commit("setCurrentSongId",l.value[r].id)};let I=y(0);const ie=()=>{I.value<2?I.value+=1:(I.value=2)&&(I.value=0)};let te=y(!1);const ke=()=>{te.value==!1?te.value=!0:te.value=!1};let W=y(0),N=y(0),K=y(0),L,T=y(.5);const ue=()=>{N.value=L.currentTime;let r=N.value/K.value*360;W.value=Math.floor(r),N.value==K.value&&(d.value=!1)};Q(()=>{Ie(),L=document.querySelector("#originplayer"),L.volume=T.value,L.addEventListener("loadedmetadata",()=>{Qe(a.value).then(E=>{if(g.value=E.songs[0].name,F.value=E.songs[0].al.picUrl,p.value=E.songs[0].ar,D.value=E.songs[0].al,C.value=E.songs[0].dt,g.value==null){let le=t.getters.getRecent[0];g.value=le.title,p.value=le.artist}}),Ze(a.value).then(E=>{v.value=E.lrc.lyric})}),L.addEventListener("play",()=>{d.value=!0,K.value=L.duration}),L.addEventListener("timeupdate",ue),L.addEventListener("ended",()=>{I.value===1?(N.value=0,L.loop=!0,L.currentTime=0,L.play()):I.value===0?l.value.length==1?(N.value=0,L.loop=!0,L.currentTime=0,L.play()):(L.loop=!1,ee()):I.value===2&&(L.loop=!1,ne())}),Be(),Ee(),w=document.querySelector(".lyricPanel");let r,n,c,k;w.addEventListener("mousedown",E=>{r=E.clientX,n=E.clientY,c=w.offsetLeft,k=w.offsetTop,f.value=!0}),document.addEventListener("mousemove",E=>{if(f.value==!1)return;let le=E.clientX,Pe=E.clientY,Ae=le-(r-c),Ue=Pe-(n-k);w.style.left=Ae+"px",w.style.top=Ue+"px"}),document.addEventListener("mouseup",E=>{f.value=!1})}),ve(()=>T.value,()=>{L.volume=T.value});const pe=r=>{let n=Math.floor(r/60),c=Math.floor(r%60);return n=n<10?"0"+n:n,c=c<10?"0"+c:c,n+":"+c},Se=r=>{N.value=K.value*(r/360),L.currentTime=N.value,L.addEventListener("timeupdate",ue)},we=r=>{L.removeEventListener("timeupdate",ue),N.value=K.value*(r/360)},Le=()=>{B.value===!0?B.value=!1:B.value=!0},be=y(),xe=()=>{$e(s.value)};async function $e(r){let n=await X({method:"get",url:r,responseType:"blob"}),c=window.URL.createObjectURL(n.data),k=document.createElement("a");k.href=c,k.download=p.value[0].name+"-"+g.value+".mp3",k.click(),k.remove(),window.URL.revokeObjectURL(c)}const Fe=Je("playlistDrawer"),De=()=>{Fe.value.toggleShow()},Be=()=>{let r=localStorage.getItem("myFav");if(r){let n=JSON.parse(r);n.length>0&&(t.state.myFavourite=n)}},Ee=()=>{let r=localStorage.getItem("albumCollection");if(r){let c=JSON.parse(r);c.length>0&&(t.state.albumCollection=c)}let n=localStorage.getItem("artistCollection");if(n){let c=JSON.parse(n);c.length>0&&(t.state.artistCollection=c)}},Ie=()=>{window.addEventListener("beforeunload",()=>{localStorage.setItem("playState",JSON.stringify(I.value)),localStorage.setItem("playVolume",JSON.stringify(T.value))});let r=localStorage.getItem("playState"),n=localStorage.getItem("playVolume");if(r){let c=JSON.parse(r);I.value=c}if(n){let c=JSON.parse(n);T.value=c}};return(r,n)=>{const c=x("el-slider");return o(),u(V,null,[e("audio",{src:_(s),id:"originplayer",controls:"",autoplay:""},null,8,Qt),e("div",Zt,[e("div",el,[e("div",tl,[e("img",{src:_(F),alt:"\u5C01\u9762"},null,8,ll)]),e("div",sl,[e("div",{class:"title",title:_(g)},S(_(g)),9,al),_(p).length>0?(o(),u("div",ol,[_(p).length>1?(o(),u("div",nl,[(o(!0),u(V,null,J(_(p),(k,E)=>(o(),u("span",{key:k.id},[e("span",{class:"artist",title:k.name},S(k.name),9,il),E+1!==_(p).length?(o(),u("span",ul," \xA0/\xA0 ")):z("",!0)]))),128))])):(o(),u("span",{key:1,class:"artist",title:_(p)[0].name},S(_(p)[0].name),9,rl))])):z("",!0)]),e("div",cl,[_(b)(_(a))?(o(),u("i",{key:1,id:"loveIcon",class:"iconfont icon-aixin",title:"\u53D6\u6D88\u559C\u6B22",onClick:n[0]||(n[0]=k=>U(_(a)))})):(o(),u("i",{key:0,id:"loveIcon",class:"iconfont icon-aixin1-copy",title:"\u559C\u6B22",onClick:P}))])]),e("div",dl,[e("div",_l,[e("div",vl,[_(I)==0?(o(),u("i",{key:0,class:"iconfont icon-liebiaoxunhuan",onClick:ie,title:"\u5217\u8868\u5FAA\u73AF"})):_(I)==1?(o(),u("i",{key:1,class:"iconfont icon-danquxunhuan",onClick:ie,title:"\u5355\u66F2\u5FAA\u73AF"})):_(I)==2?(o(),u("i",{key:2,class:"iconfont icon-bofang-suijibofang",onClick:ie,title:"\u968F\u673A\u64AD\u653E"})):z("",!0)]),e("div",{class:"pre",onClick:Z},pl),e("div",{class:"playPause",onClick:q},[_(d)?(o(),u("i",gl)):(o(),u("i",hl))]),e("div",{class:"next",onClick:ee},yl),e("div",{class:"lyrics",onClick:Le}," \u8BCD ")]),e("div",Cl,[e("div",kl,S(pe(_(N))),1),e("div",Sl,[h(c,{modelValue:_(W),"onUpdate:modelValue":n[1]||(n[1]=k=>ce(W)?W.value=k:W=k),"show-tooltip":!1,size:"small",max:360,step:1,onChange:Se,onInput:we},null,8,["modelValue"])]),e("div",wl,S(pe(_(K))),1)])]),e("div",Ll,[e("div",bl,[e("i",{class:"iconfont icon-yinliang",onClick:ke}),j(e("div",xl,[h(c,{modelValue:_(T),"onUpdate:modelValue":n[2]||(n[2]=k=>ce(T)?T.value=k:T=k),vertical:"",height:"80px","show-tooltip":!1,max:1,step:.01},null,8,["modelValue","step"])],512),[[Y,_(te)]])]),e("div",$l,[e("i",{class:"iconfont icon-xiazai",title:"\u4E0B\u8F7D",onClick:xe}),j(e("a",{href:_(s),ref_key:"downloadBtn",ref:be,target:"_blank"},null,8,Fl),[[Y,!1]])]),e("div",{class:"playlist",onClick:De},Bl)])]),j(e("div",El,[h(Gt,{dataList:_(v)},null,8,["dataList"])],512),[[Y,_(B)]])],64)}}});var Pl=O(Il,[["__scopeId","data-v-227966da"]]);const Al={class:"drawerLayout"},Ul={class:"playlistLayout"},Rl={class:"header"},Nl={class:"totalCount"},Tl={class:"playlist"},Vl=["onDblclick"],Ml=["title"],Ol={class:"artists"},Hl=["title"],Jl={class:"duration"},zl=["onClick"],Kl=M({setup(m,{expose:t}){ae();const s=oe(),a=y(!1),g=y("rtl"),F=()=>{a.value=!a.value},p=H(()=>s.getters.getCurrentPlaylist);let D=H(()=>s.getters.getCurrentSongId);const C=()=>{s.commit("clearPlaylist"),s.commit("setCurrentUrl","")},l=i=>{s.commit("setCurrentUrl",i.url),s.commit("pushRecent",{id:i.id,title:i.title,artist:i.artist,type:"\u6B4C\u66F2",time:+new Date,url:i.url}),s.commit("setCurrentSongId",i.id)},v=i=>{p.value.length==1?C():s.commit("deleteFromPlaylist",i)},B=i=>{let b=new Date(i),P=b.getMinutes();P=P<10?"0"+P:P;let U=b.getSeconds();return U=U<10?"0"+U:U,P+":"+U},w=()=>{window.addEventListener("beforeunload",()=>{sessionStorage.setItem("PlayList",JSON.stringify(p.value))});let i=sessionStorage.getItem("PlayList");if(i){let b=JSON.parse(i);b.length>0&&(s.state.currentPlaylist=b)}},f=async()=>{if(p.value.length!=0){for(let i=0;i<p.value.length;i++){let P=(await ye(p.value[i].id)).data[0].url;p.value[i].url=P}Ke.alert("Url\u5237\u65B0\u5B8C\u6210\uFF0C\u8BF7\u91CD\u65B0\u53CC\u51FB\u64AD\u653E","\u63D0\u793A",{confirmButtonText:"OK",confirmButtonClass:"confirmBtn",customClass:"refreshMessageBox"})}};return Q(()=>{w()}),t({toggleShow:F}),(i,b)=>{const P=x("el-scrollbar"),U=x("el-drawer");return j((o(),u("div",Al,[h(U,{modelValue:a.value,"onUpdate:modelValue":b[0]||(b[0]=d=>a.value=d),title:"\u5F53\u524D\u64AD\u653E\u5217\u8868",direction:g.value,"lock-scroll":!1,modal:!1,size:420,"show-close":!1,"modal-class":"modal"},{default:$(()=>[e("div",Ul,[e("div",Rl,[e("div",Nl," \u5171"+S(_(s).state.currentPlaylist.length)+"\u9996 ",1),e("div",{class:"refresh",onClick:f}," \u5237\u65B0Url "),e("div",{class:"clearPlaylist",onClick:C}," \u6E05\u7A7A\u5217\u8868 ")]),e("div",Tl,[h(P,null,{default:$(()=>[e("ul",null,[(o(!0),u(V,null,J(_(p),(d,A)=>(o(),u("li",{class:ze(["playlistItem",{active:d.id==_(D)}]),key:d.id,onDblclick:R=>l(d)},[e("div",{class:"title",title:d.title},[e("span",null,S(d.title),1)],8,Ml),e("div",Ol,S(d.artist[0].name?d.artist[0].name:d.artist),1),e("div",{class:"from",title:"\u6765\u81EA\uFF1A"+d.from},S(d.from),9,Hl),e("div",Jl,S(B(d.duration)),1),e("div",{class:"delete",onClick:R=>v(d.id)}," \xD7 ",8,zl)],42,Vl))),128))])]),_:1})])])]),_:1},8,["modelValue","direction"])],512)),[[Y,a.value]])}}});var jl=O(Kl,[["__scopeId","data-v-1408bca4"]]);const ql={class:"common-layout"},Wl=M({setup(m){const t=y(),s=y();return Q(()=>{se("scrollBar",t),se("playlistDrawer",s)}),se("scrollBar",t),se("playlistDrawer",s),(a,g)=>{const F=x("el-header"),p=x("el-aside"),D=x("router-view"),C=x("el-scrollbar"),l=x("el-main"),v=x("el-container"),B=x("el-footer");return o(),u("div",ql,[h(F,{class:"header"},{default:$(()=>[h(Jt)]),_:1}),h(v,{class:"content"},{default:$(()=>[h(p,{width:"200px",class:"aside"},{default:$(()=>[h(jt)]),_:1}),h(l,{class:"main",id:"main"},{default:$(()=>[h(C,{ref_key:"scrollBar",ref:t},{default:$(()=>[h(D,null,{default:$(({Component:w})=>[(o(),G(qe,{exclude:"songDetail"},[(o(),G(je(w)))],1024))]),_:1})]),_:1},512),h(jl,{ref_key:"playlistDrawer",ref:s},null,512)]),_:1})]),_:1}),h(B,{class:"footer"},{default:$(()=>[h(Pl)]),_:1})])}}});var ss=O(Wl,[["__scopeId","data-v-ed4dd384"]]);export{ss as default};
