import{d as D,D as O,l,m as w,n as N,o as c,c as r,e,G as z,s as a,F as S,f as B,t as $,p as j,j as V,q as I,z as Q,b as k,u as F,L as R,a as W,C as X,g as Y}from"./index.3e4959b4.js";import{f as A,h as Z,i as ee,j as H,k as x}from"./getDiscoverData.301c6593.js";import{C as te}from"./CommonTabBar.5a50b094.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import{P as se}from"./Pagination.cf887d00.js";import{a as M}from"./request.6f08c656.js";const ae=o=>(j("data-v-9d146d60"),o=o(),V(),o),le={class:"tagMenu"},oe=ae(()=>e("span",null,"\u5168\u90E8\u6B4C\u5355",-1)),ne=[oe],ue={class:"sub"},ie={class:"ulTitle"},ce={class:"subArea"},re=["onClick"],_e=D({props:["tagTypes","tagList","defaultTag"],emits:["currentTagChanged"],setup(o,{emit:C}){const _=o,{defaultTag:t}=O(_);let s=l("");w(()=>{s.value=t==null?void 0:t.value}),N(()=>t==null?void 0:t.value,()=>{(t==null?void 0:t.value)!==s.value&&(s.value=t==null?void 0:t.value)});const n=(h,i)=>h.filter(d=>d.category==i),u=h=>{s.value=h,C("currentTagChanged",s.value)},g=()=>{s.value="\u5168\u90E8\u6B4C\u5355",C("currentTagChanged",s.value)};return(h,i)=>(c(),r("div",le,[e("div",{class:z(["all",{active:a(s)==="\u5168\u90E8\u6B4C\u5355"}]),onClick:g},ne,2),e("div",ue,[(c(!0),r(S,null,B(o.tagTypes,(f,d)=>(c(),r("ul",{key:d},[e("div",ie,$(f),1),e("div",ce,[(c(!0),r(S,null,B(n(o.tagList,d),m=>(c(),r("li",{class:z(["subTag",{selected:m.name==a(s)}]),key:m.name,onClick:L=>u(m.name)},[e("span",null,$(m.name),1)],10,re))),128))])]))),128))])]))}});var ve=E(_e,[["__scopeId","data-v-9d146d60"]]);const de={class:"layout"},ge={class:"tagChooser"},he={class:"menu"},pe={class:"hotTags"},Ce=["onClick"],me=D({props:["hotTags"],emits:["tagChanged"],setup(o,{emit:C}){let _=l("\u65E5\u8BED"),t=l([]),s=l([]),n=l(!1);w(()=>{A().then(i=>{t.value=i.sub,s.value=i.categories})});const u=i=>{_.value=i,n.value=!1},g=()=>{n.value=!n.value},h=i=>{_.value=i,n.value=!1};return N(()=>_.value,()=>{C("tagChanged",_.value)}),(i,f)=>(c(),r("div",de,[e("div",ge,[e("div",{class:"button",onClick:g},$(a(_)+"  \u3009"),1),I(e("div",he,[k(ve,{tagTypes:a(s),tagList:a(t),defaultTag:a(_),onCurrentTagChanged:u},null,8,["tagTypes","tagList","defaultTag"])],512),[[Q,a(n)]])]),e("div",pe,[e("ul",null,[(c(!0),r(S,null,B(o.hotTags,d=>(c(),r("li",{class:"tag",onClick:m=>h(d.playlistTag.name)},[e("span",null,$(d.playlistTag.name),1)],8,Ce))),256))])])]))}});var ye=E(me,[["__scopeId","data-v-79d03186"]]);const Te={class:"ullayout"},fe={class:"songlistUl"},$e=["onClick"],Le={alt:"\u5C01\u9762"},ke=["title","onClick"],be=D({props:["dataList"],setup(o){const C=F(),_=t=>{C.push("/detail/songlist/"+t)};return(t,s)=>{const n=R("lazy");return c(),r("div",Te,[e("ul",fe,[(c(!0),r(S,null,B(o.dataList,u=>(c(),r("li",{class:"songlistItem",key:u.id},[e("div",{class:"cover",onClick:g=>_(u.id)},[I(e("img",Le,null,512),[[n,u.coverImgUrl]])],8,$e),e("div",{class:"title",title:u.name,onClick:g=>_(u.id)},$(u.name),9,ke)]))),128))])])}}});var Se=E(be,[["__scopeId","data-v-646c2c51"]]);const Be=o=>(j("data-v-217aeb9a"),o=o(),V(),o),Ie={class:"songlistLayout"},De={class:"tabbar"},Ee={class:"cover"},xe=["src"],we={class:"info"},qe=Be(()=>e("div",{class:"icon"},"\u7CBE\u54C1\u6B4C\u5355",-1)),Ue={class:"name"},Pe={class:"background"},ze=["src"],He={class:"tags"},Me={class:"songlist"},Ne=D({setup(o){const C=F(),_=W(),t=X(()=>_.getters.getDiscoverTabs);let s=l("\u65E5\u8BED"),n=l(""),u=l(""),g=l(0),h=l([]),i=l([]),f=l(!0),d=l([]),m=l(0),L=l(20);const q=l();let T=l(!0);w(()=>{M.all([A(),Z(),ee(),H("\u65E5\u8BED",10),x(s.value,L.value)]).then(M.spread((p,v,y,b,P)=>{n.value=b.playlists[0].coverImgUrl,u.value=b.playlists[0].name,g.value=b.playlists[0].id,h.value=v.tags,i.value=y.tags,d.value=P.playlists,m.value=P.total,T.value=!1}))});const G=p=>{q.value.resetPage(),T.value=!0,s.value=p,f.value=U(i.value),U(i.value)&&H(s.value,10).then(v=>{n.value=v.playlists[0].coverImgUrl,u.value=v.playlists[0].name,g.value=v.playlists[0].id}),x(s.value,L.value).then(v=>{d.value=v.playlists,T.value=!1})},U=p=>p.some(y=>y.name==s.value),J=p=>{T.value=!0;let v=(p-1)*L.value;x(s.value,L.value,v).then(y=>{d.value=y.playlists,T.value=!1})},K=p=>{C.push("/detail/songlist/"+p)};return(p,v)=>{const y=R("loading");return c(),r("div",Ie,[e("div",De,[k(te,{tabList:a(t)},null,8,["tabList"])]),a(f)?I((c(),r("div",{key:0,class:"hqbar",onClick:v[0]||(v[0]=b=>K(a(g)))},[e("div",Ee,[e("img",{src:a(n),alt:"\u5C01\u9762"},null,8,xe)]),e("div",we,[qe,e("div",Ue,$(a(u)),1)]),e("div",Pe,[e("img",{src:a(n),alt:""},null,8,ze)])])),[[y,a(T)]]):Y("",!0),e("div",He,[k(ye,{hotTags:a(h),onTagChanged:G},null,8,["hotTags"])]),I((c(),r("div",Me,[k(Se,{dataList:a(d)},null,8,["dataList"]),k(se,{pagerCount:9,pageSize:20,totalCount:a(m),onPageChange:J,ref_key:"pagi",ref:q},null,8,["totalCount"])])),[[y,a(T)]])])}}});var Je=E(Ne,[["__scopeId","data-v-217aeb9a"]]);export{Je as default};
