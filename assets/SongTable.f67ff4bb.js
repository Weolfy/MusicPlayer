import{d as z,k as X,u as Y,a as G,D as H,C as w,l as k,r as h,o as c,c as m,e as s,b as a,w as d,t as v,s as p,g as J,i as K,q as Q,z as W,M as E}from"./index.83995d8d.js";import{g}from"./play.0be1cf54.js";import{_ as Z}from"./plugin-vue_export-helper.21dcd24c.js";const L={class:"table"},ee={class:"buttons"},te={style:{display:"flex","align-items":"center","justify-content":"space-between"}},le={class:"num"},ue=["onClick"],oe=["onClick"],ne=["title"],se={key:0,class:"noCopyright"},ie={key:1},re={key:2,class:"trialTags"},ae={key:3,class:"trialTags"},ce=["title","onClick"],me=["title","onClick"],de={class:"rClickMenu"},ve=z({props:["dataList"],setup(F){const b=F;X();const C=Y(),n=G();let{dataList:t}=H(b);const D=e=>{let o=new Date(e),l=o.getMinutes();l=l<10?"0"+l:l;let i=o.getSeconds();return i=i<10?"0"+i:i,l+":"+i},y=e=>{if(e.privilege.cp==0){E({message:"\u8BE5\u6B4C\u66F2\u56E0\u7248\u6743\u6216\u4F1A\u5458\u539F\u56E0\uFF0C\u6682\u65F6\u65E0\u6CD5\u64AD\u653E\uFF0C\u656C\u8BF7\u8C05\u89E3",offset:250,duration:2e3,customClass:"cpMessage"});let o=document.querySelectorAll(".cpMessage.el-message");if(o)for(let l=0;l<o.length;l++)o[l].style.cssText=" --el-message-bg-color: #000; --el-message-border-color: #000; --el-message-text-color: #ec4141;";return}g(e.id).then(o=>{let l=o.data[0].url;n.commit("setCurrentUrl",l),n.commit("pushRecent",{id:e.id,title:e.name,artist:e.ar,type:"\u6B4C\u66F2",time:+new Date,url:l}),n.commit("pushCurrentPlaylist",{id:e.id,title:e.name,artist:e.ar,from:"\u8BE6\u60C5",duration:e.dt,url:l}),n.commit("setCurrentSongId",e.id)})},x=e=>{C.push("/detail/artist/"+e)},B=e=>{C.push("/detail/album/"+e)},S=e=>{C.push("/detail/song/"+e)},A=e=>{if(e.privilege.cp==0)return;let o={id:e.id,title:e.name,artist:e.ar,album:e.al,duration:e.dt};n.commit("pushFav",o)},M=e=>{n.commit("removeFav",e)};let R=w(()=>n.getters.getFav);const I=w(()=>function(e){return R.value.some(l=>l.id==e)});let _=k(!1),r=k();const P=(e,o,l)=>{T(),l.preventDefault();let i=document.querySelector(".rClickMenu");i.style.top=(e.no-1)*30+l.offsetY+53+"px",i.style.left=l.offsetX+74+"px",r.value=e},T=()=>{_.value=!0},$=()=>{_.value=!1},q=(e,o,l)=>{let i=document.querySelector(".rClickMenu");l.path.includes(i)||$()},N=()=>{y(r.value)},U=()=>{if(r.value.copyright==0){E({message:"\u8BE5\u6B4C\u66F2\u56E0\u7248\u6743\u6216\u4F1A\u5458\u539F\u56E0\uFF0C\u6682\u65F6\u65E0\u6CD5\u64AD\u653E\uFF0C\u656C\u8BF7\u8C05\u89E3",offset:250,duration:2e3,customClass:"cpMessage"});let e=document.querySelectorAll(".cpMessage.el-message");if(e)for(let o=0;o<e.length;o++)e[o].style.cssText=" --el-message-bg-color: #000; --el-message-border-color: #000; --el-message-text-color: #ec4141;";return}g(r.value.id).then(e=>{let o=e.data[0].url;n.commit("pushCurrentPlaylist",{id:r.value.id,title:r.value.title,artist:r.value.artist,from:"\u641C\u7D22",duration:r.value.duration,url:o})})},V=async()=>{n.commit("clearPlaylist");for(let e=0;e<(t==null?void 0:t.value.length);e++){if((t==null?void 0:t.value[e].privilege.cp)==0)continue;let l=(await g(t==null?void 0:t.value[e].id)).data[0].url;n.commit("pushCurrentPlaylistOrder",{id:t==null?void 0:t.value[e].id,title:t==null?void 0:t.value[e].name,artist:t==null?void 0:t.value[e].ar,from:"\u8BE6\u60C5",duration:t==null?void 0:t.value[e].dt,url:l}),e==0&&(n.commit("setCurrentUrl",l),n.commit("pushRecent",{id:t==null?void 0:t.value[e].id,title:t==null?void 0:t.value[e].name,artist:t==null?void 0:t.value[e].ar,type:"\u6B4C\u66F2",time:+new Date}),n.commit("setCurrentSongId",t==null?void 0:t.value[e].id))}},O=async()=>{for(let e=0;e<(t==null?void 0:t.value.length);e++){if((t==null?void 0:t.value[e].privilege.cp)==0)continue;let l=(await g(t==null?void 0:t.value[e].id)).data[0].url;n.commit("pushCurrentPlaylistOrder",{id:t==null?void 0:t.value[e].id,title:t==null?void 0:t.value[e].name,artist:t==null?void 0:t.value[e].ar,from:"\u8BE6\u60C5",duration:t==null?void 0:t.value[e].dt,url:l})}};return(e,o)=>{const l=h("el-table-column"),i=h("el-progress"),j=h("el-table");return c(),m("div",L,[s("div",ee,[s("div",{class:"button",onClick:o[0]||(o[0]=u=>V())},"\u5168\u90E8\u64AD\u653E"),s("div",{class:"button",onClick:o[1]||(o[1]=u=>O())},"\u6DFB\u52A0\u5230\u64AD\u653E\u5217\u8868")]),a(j,{data:p(t),stripe:"",style:{width:"100%"},"header-row-class-name":"tableheader",onRowDblclick:y,onRowContextmenu:P,onRowClick:q},{default:d(()=>[a(l,{type:"index",index:1,width:"35"}),a(l,{label:"",width:"30",class:"icon"},{default:d(u=>[s("div",te,[s("span",le,v(u.row.index<10?"0"+u.row.index:u.row.index),1),p(I)(u.row.id)?(c(),m("i",{key:1,id:"loveIcon",class:"iconfont icon-aixin",title:"\u53D6\u6D88\u559C\u6B22",onClick:f=>M(u.row.id)},null,8,oe)):(c(),m("i",{key:0,id:"loveIcon",class:"iconfont icon-aixin1-copy",title:"\u559C\u6B22",onClick:f=>A(u.row)},null,8,ue))])]),_:1}),a(l,{label:"\u97F3\u4E50\u6807\u9898",width:"230",class:"title"},{default:d(u=>[s("div",{title:u.row.name},[u.row.privilege.cp===0?(c(),m("div",se,v(u.row.name),1)):(c(),m("div",ie,v(u.row.name),1)),u.row.fee==1&&u.row.privilege.cp!=0?(c(),m("span",re,"\u8BD5\u542C")):u.row.fee==1&&u.row.privilege.cp==0?(c(),m("span",ae,"VIP")):J("",!0)],8,ne)]),_:1}),a(l,{label:"\u6B4C\u624B",width:"100","class-name":"artist"},{default:d(u=>[s("div",{title:u.row.ar[0].name,onClick:f=>x(u.row.ar[0].id)},v(u.row.ar[0].name),9,ce)]),_:1}),a(l,{label:"\u4E13\u8F91",width:"140","class-name":"album"},{default:d(u=>[s("div",{title:u.row.al.name,onClick:f=>B(u.row.al.id)},v(u.row.al.name),9,me)]),_:1}),a(l,{label:"\u65F6\u957F",width:"60",class:"duration"},{default:d(u=>[K(v(D(u.row.dt)),1)]),_:1}),a(l,{label:"\u70ED\u5EA6",class:"hot"},{default:d(u=>[a(i,{percentage:u.row.pop,"show-text":!1,color:"#c8c8c8"},null,8,["percentage"])]),_:1})]),_:1},8,["data"]),Q(s("div",de,[s("ul",null,[s("li",{class:"menuItem",onClick:o[2]||(o[2]=u=>S(p(r).id))},"\u67E5\u770B\u8BE6\u60C5"),s("li",{class:"menuItem",onClick:N},"\u64AD\u653E"),s("li",{class:"menuItem",onClick:U},"\u4E0B\u4E00\u9996\u64AD\u653E")])],512),[[W,p(_)]])])}}});var _e=Z(ve,[["__scopeId","data-v-05ad35c3"]]);export{_e as S};
