import{d as x,k as L,u as w,a as N,l as s,m as V,n as U,C as y,L as H,q as M,s as a,o as h,c as b,e as t,i as R,t as C,g as j,b as F,p as q,j as Y}from"./index.83995d8d.js";import{d as k}from"./getDetail.ee9919f8.js";import{g as A,C as z}from"./getComment.8adb95ff.js";import{S as G}from"./SongTable.f67ff4bb.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./request.6f08c656.js";import"./play.0be1cf54.js";const K=n=>(q("data-v-71ad26c4"),n=n(),Y(),n),O={class:"alLayout"},P={class:"albumInfo"},Q={class:"alcover"},W=["src"],X={class:"info"},Z={class:"alname"},$={key:0,class:"desc"},ee={class:"alartist"},te={class:"releaseTime"},ae={class:"button"},le={class:"albumDetail"},se={class:"alsongs"},oe=K(()=>t("div",{class:"title"}," \u6B4C\u66F2\u5217\u8868 ",-1)),ue={class:"alHotcomment"},ie=x({setup(n){const l=L();w();const g=N();let m=s(""),r=s(""),d=s(""),f=s(0),v=s(),D=s(0),_=s([]),B=s([]),p=s(!0);V(()=>{k(l.params.id).then(e=>{m.value=e.album.name,r.value=e.album.alias[0],d.value=e.album.picUrl,f.value=e.album.publishTime,v.value=e.album.artists[0].name,D.value=e.album.artists[0].id,_.value=e.songs,p.value=!1}),A(l.params.id,3).then(e=>{B.value=e.hotComments})}),U(()=>l.params.id,()=>{l.meta.title=="\u4E13\u8F91\u8BE6\u60C5"&&(p.value=!0,k(l.params.id).then(e=>{m.value=e.album.name,r.value=e.album.alias[0],d.value=e.album.picUrl,f.value=e.album.publishTime,v.value=e.album.artists[0].name,D.value=e.album.artists[0].id,_.value=e.songs,p.value=!1}),A(l.params.id,3).then(e=>{B.value=e.hotComments}))});const S=e=>{let o=new Date(e),u=o.getFullYear(),i=o.getMonth();i=i<10?"0"+(i+1):i+1;let c=o.getDate();return c=c<10?"0"+c:c,u+"-"+i+"-"+c},I=()=>{let e={id:l.params.id,name:m.value,cover:d.value,artist:v.value,artistId:D.value,count:_.value.length};g.commit("pushAlbumCollection",e)},T=y(()=>y(()=>g.getters.getAlbumCollection).value.some(u=>u.id==l.params.id)),E=()=>{g.commit("deleteAlbumCollection",l.params.id)};return(e,o)=>{const u=H("loading");return M((h(),b("div",O,[t("div",P,[t("div",Q,[t("img",{src:a(d),alt:"\u4E13\u8F91\u5C01\u9762"},null,8,W)]),t("div",X,[t("div",Z,[R(C(a(m))+" ",1),a(r)?(h(),b("span",$,"("+C(a(r))+")",1)):j("",!0)]),t("div",ee," \u6B4C\u624B: "+C(a(v)),1),t("div",te," \u65F6\u95F4: "+C(S(a(f))),1),t("div",ae,[a(T)?(h(),b("div",{key:1,class:"collect",onClick:E},"\u5DF2\u6536\u85CF")):(h(),b("div",{key:0,class:"collect",onClick:I},"\u6536\u85CF"))])])]),t("div",le,[t("div",se,[oe,F(G,{dataList:a(_)},null,8,["dataList"])]),t("div",ue,[F(z,{commentTitle:"\u70ED\u95E8\u8BC4\u8BBA",commentData:a(B)},null,8,["commentData"])])])])),[[u,a(p)]])}}});var pe=J(ie,[["__scopeId","data-v-71ad26c4"]]);export{pe as default};
