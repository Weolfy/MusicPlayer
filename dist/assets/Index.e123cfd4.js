var Ue=Object.defineProperty;var Re=(m,t,s)=>t in m?Ue(m,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):m[t]=s;var he=(m,t,s)=>(Re(m,typeof t!="symbol"?t+"":t,s),s);import{d as M,u as ae,a as oe,r as x,o as a,c as u,b as h,w as $,e,F as V,f as J,t as S,g as z,h as Ne,i as re,p as de,j as _e,k as fe,l as g,m as Q,n as ve,q as j,v as Te,s as d,x as ce,y as Ve,z as Y,A as G,B as Me,C as H,D as Oe,E as He,G as Je,H as ze,I as se,J as Ke,K as je}from"./index.ea9520da.js";import{a as X}from"./request.985c1484.js";import{g as qe,a as We,b as Xe,c as Ye,s as Ge,d as Qe}from"./search.961ad6e9.js";import{g as ge}from"./play.d3e5bd87.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import{g as Ze}from"./getDetail.45dbff1a.js";import{d as et}from"./default.2e3a4730.js";class tt{constructor(){he(this,"use",t=>{let s;return()=>new Promise((o,y)=>{s&&clearTimeout(s),s=setTimeout(()=>{o(),s=void 0},t)})})}}const ye=m=>(de("data-v-2c06f574"),m=m(),_e(),m),lt={class:"popoverLayout"},st={key:0,class:"hotSearch"},at=ye(()=>e("div",{class:"title"},"\u70ED\u641C\u699C",-1)),ot={class:"rank"},nt=["onClick"],it={class:"index"},ut={class:"info"},rt={class:"titleAndHot"},ct={class:"ranktitle"},dt={class:"hot"},_t={key:0,class:"desc"},vt={key:1,class:"searchSuggest"},mt={class:"guess"},pt=ye(()=>e("div",{class:"guessTitle"}," \u731C\u4F60\u60F3\u641C ",-1)),ht=["onClick"],ft={class:"typeTitle"},gt={class:"suggestItem"},yt=["onClick"],Ct={key:0,class:"transNames"},kt=["onClick"],St=["onClick"],wt=["onClick"],Lt=M({props:["dataList","guessList","suggestList","state"],emits:["itemClicked","hide"],setup(m,{emit:t}){const s=ae(),o=oe(),y=_=>{t("itemClicked",_)},F=_=>{switch(_){case"songs":return"\u5355\u66F2";case"artists":return"\u6B4C\u624B";case"albums":return"\u4E13\u8F91";case"playlists":return"\u6B4C\u5355"}},p=_=>{t("hide"),ge(_.id).then(B=>{let w=B.data[0].url;o.commit("setCurrentUrl",w),o.commit("pushRecent",{id:_.id,title:_.name,artist:_.artists,type:"\u6B4C\u66F2",time:+new Date,url:w}),o.commit("pushCurrentPlaylist",{id:_.id,title:_.name,artist:_.artists,from:"\u641C\u7D22",duration:_.duration,url:w}),o.commit("setCurrentSongId",_.id)})},D=_=>{t("hide"),s.push("/detail/artist/"+_)},C=_=>{t("hide"),s.push("/detail/album/"+_)},l=_=>{t("hide"),s.push("/detail/songlist/"+_)};return(_,B)=>{const w=x("el-scrollbar");return a(),u("div",lt,[m.state?(a(),u("div",st,[h(w,null,{default:$(()=>[at,e("ul",ot,[(a(!0),u(V,null,J(m.dataList,(f,i)=>(a(),u("li",{class:"rankItem",key:f.searchWord,onClick:b=>y(f.searchWord)},[e("div",it,S(i+1),1),e("div",ut,[e("div",rt,[e("div",ct,S(f.searchWord),1),e("div",dt,S(f.score),1)]),f.content?(a(),u("div",_t,S(f.content),1)):z("",!0)])],8,nt))),128))])]),_:1})])):(a(),u("div",vt,[h(w,null,{default:$(()=>[e("ul",mt,[pt,(a(!0),u(V,null,J(m.guessList,f=>(a(),u("li",{class:"guessItem",onClick:i=>y(f.keyword)},S(f.keyword),9,ht))),256))]),(a(!0),u(V,null,J(m.suggestList.order,f=>(a(),u("ul",{class:"result",key:f},[e("div",ft,S(F(f)),1),(a(!0),u(V,null,J(m.suggestList[f],i=>(a(),u("li",gt,[f=="songs"?(a(),u("div",{key:0,class:"songItem",onClick:Ne(b=>p(i),["stop"])},[re(S(i.name)+" ",1),i.transNames?(a(),u("span",Ct," ("+S(i.transNames[0])+") ",1)):z("",!0),re(" - "+S(i.artists[0].name),1)],8,yt)):f=="artists"?(a(),u("div",{key:1,class:"artistItem",onClick:b=>D(i.id)},S(i.name),9,kt)):f=="albums"?(a(),u("div",{key:2,class:"albumItem",onClick:b=>C(i.id)},S(i.name)+" - "+S(i.artist.name),9,St)):f=="playlists"?(a(),u("div",{key:3,class:"songlistItem",onClick:b=>l(i.id)},S(i.name),9,wt)):z("",!0)]))),256))]))),128))]),_:1})]))])}}});var bt=O(Lt,[["__scopeId","data-v-2c06f574"]]);const xt={class:"searchbar"},$t={id:"searchSong"},Ft=["onKeyup","placeholder"],Dt={class:"menuPopover"},Bt=M({setup(m){fe();const t=ae(),s=oe();let o=g(""),y=g(""),F=g([]),p=g([]),D=g([]),C=g(!1),l=g(!0);const _=()=>{f(),Ge(o.value).then(v=>{t.push("/search/result/song/"+o.value),s.commit("setSongResult",v.result.songs),s.commit("setSongCount",v.result.songCount),s.commit("changeStatus")})},B=v=>{o.value=v,_()};Q(()=>{X.all([qe(),We()]).then(X.spread((v,A)=>{y.value=A.data.realkeyword,F.value=v.data}))});const w=()=>{C.value=!0},f=()=>{C.value=!1};let i=new tt().use(500);const b=()=>{t.go(1)},P=()=>{t.back()};ve(()=>o.value,()=>{o.value?(l.value=!1,i().then(()=>{U()})):l.value=!0});const U=()=>{o.value!==""&&X.all([Xe(o.value),Ye(o.value)]).then(X.spread((v,A)=>{p.value=v.result.allMatch,D.value=A.result}))};return document.addEventListener("mousedown",v=>{let A=document.getElementsByClassName("menuPopover")[0],R=document.querySelector("#searchSong");v.path.includes(A)||v.path.includes(R)||f()}),(v,A)=>{const R=x("ArrowLeft"),q=x("el-icon"),Z=x("el-button"),ee=x("ArrowRight"),ne=x("Search");return a(),u("div",xt,[h(Z,{circle:"",size:"small",class:"btn",color:"#d93b3b",onClick:P},{default:$(()=>[h(q,null,{default:$(()=>[h(R)]),_:1})]),_:1}),h(Z,{circle:"",size:"small",class:"btn",color:"#d93b3b",onClick:b},{default:$(()=>[h(q,null,{default:$(()=>[h(ee)]),_:1})]),_:1}),e("div",$t,[h(q,{color:"white",id:"searchbtn",onClick:_},{default:$(()=>[h(ne)]),_:1}),j(e("input",{type:"text","onUpdate:modelValue":A[0]||(A[0]=I=>ce(o)?o.value=I:o=I),onKeyup:Ve(_,["enter"]),placeholder:d(y),onFocus:w},null,40,Ft),[[Te,d(o)]])]),e("div",Dt,[j(h(bt,{dataList:d(F),onItemClicked:B,onHide:f,state:d(l),guessList:d(p),suggestList:d(D)},null,8,["dataList","state","guessList","suggestList"]),[[Y,d(C)]])])])}}});var Et=O(Bt,[["__scopeId","data-v-b63a232a"]]),It="./assets/logo.35204645.png";const Pt={},At=m=>(de("data-v-725696ba"),m=m(),_e(),m),Ut={id:"logo"},Rt=At(()=>e("img",{src:It,alt:"TheLogo"},null,-1)),Nt=re(" \u4E91 \u97F3 \u4E50 "),Tt=[Rt,Nt];function Vt(m,t){return a(),u("div",Ut,Tt)}var Mt=O(Pt,[["render",Vt],["__scopeId","data-v-725696ba"]]);const Ot={class:"headerComp"},Ht=M({setup(m){return(t,s)=>(a(),u("div",Ot,[h(Mt),h(Et)]))}});var Jt=O(Ht,[["__scopeId","data-v-d092cfe2"]]);const zt=M({props:["itemList"],setup(m){const t=ae(),s=o=>{t.push(o)};return(o,y)=>{const F=x("SidebarItem",!0),p=x("el-sub-menu"),D=x("el-menu-item");return a(!0),u(V,null,J(m.itemList,C=>(a(),u(V,{key:C.path},[C.children&&C.children.length>0?(a(),G(p,{key:0,index:C.path},{title:$(()=>[e("span",null,S(C.meta.title),1)]),default:$(()=>[h(F,{itemList:C.children},null,8,["itemList"])]),_:2},1032,["index"])):(a(),G(D,{key:1,index:C.path,onClick:l=>s(C.path)},{title:$(()=>[e("span",null,S(C.meta.title),1)]),_:2},1032,["index","onClick"]))],64))),128)}}});const Kt=M({setup(m){const t=fe();let s=Me([{path:"/discover",component:"",meta:{title:"\u53D1\u73B0\u97F3\u4E50"},children:[]},{path:"/radio",component:"",meta:{title:"\u7535\u53F0"},children:[]},{path:"/video",component:"",meta:{title:"\u89C6\u9891"},children:[]},{path:"/privatefm",component:"",meta:{title:"\u79C1\u4EBAFM"},children:[]},{path:"/mymusic",component:"",meta:{title:"\u6211\u7684\u97F3\u4E50"},children:[{path:"/mymusic/recent",component:"",meta:{title:"\u6700\u8FD1\u64AD\u653E"}},{path:"/mymusic/mycollection",component:"",meta:{title:"\u6211\u7684\u6536\u85CF"}}]},{path:"/mysonglists",component:"",meta:{title:"\u521B\u5EFA\u7684\u6B4C\u5355"},children:[{path:"/mysonglists/myfavourite",component:"",meta:{title:"\u6211\u559C\u6B22\u7684\u97F3\u4E50"}}]}]);const o=H(()=>{const{meta:y}=t;return y.from});return(y,F)=>{const p=x("el-menu"),D=x("el-scrollbar");return a(),G(D,null,{default:$(()=>[h(p,{"active-text-color":"#000000","background-color":"#fff",class:"el-menu-vertical-demo","default-active":d(o),"default-openeds":["/mymusic","/mysonglists"]},{default:$(()=>[h(zt,{itemList:d(s)},null,8,["itemList"])]),_:1},8,["default-active"])]),_:1})}}});var jt=O(Kt,[["__scopeId","data-v-3d31e0d7"]]);const qt={class:"lyricsLayout"},Wt={class:"line"},Xt={key:0},Yt=M({props:["dataList"],setup(m){const t=m;let{dataList:s}=Oe(t),o,y=g(),F=g(""),p=g(!1);const D=l=>{if(l=="")return F.value="\u6682\u65E0\u6B4C\u8BCD","noLyrics";{let _=l.split(`
`),B=/\[\d{2}:\d{2}.\d{2,3}\]/g,w={},f=[],i=[];return _[_.length-1].length===0&&_.pop(),_.forEach((b,P,U)=>{let v=b.match(B),A=b.replace(B,"");A=="\u7EAF\u97F3\u4E50\uFF0C\u8BF7\u6B23\u8D4F"&&(p.value=!0);let R=v[0].slice(1,-1).split(":");f.push(parseInt(R[0],10)*60+parseFloat(R[1])),i.push(A)}),w={timeline:f,lyricsline:i},w}},C=()=>{for(let l=0;l<y.value.timeline.length;l++)o.currentTime>y.value.timeline[l]&&o.currentTime<y.value.timeline[l+1]&&(F.value=y.value.lyricsline[l])};return Q(()=>{o=document.querySelector("#originplayer"),o.addEventListener("ended",()=>{p.value=!1,o.removeEventListener("timeupdate",C),F.value=""})}),ve(()=>s==null?void 0:s.value,()=>{y.value=D(s==null?void 0:s.value),y.value!=="noLyrics"&&o.addEventListener("timeupdate",C)}),(l,_)=>(a(),u("div",qt,[e("div",Wt,S(d(F)),1),d(p)?(a(),u("div",Xt," \u7EAF\u97F3\u4E50\uFF0C\u8BF7\u6B23\u8D4F ")):z("",!0)]))}});var Gt=O(Yt,[["__scopeId","data-v-6777e6f6"]]);const me=m=>(de("data-v-227966da"),m=m(),_e(),m),Qt=["src"],Zt={class:"customPlayer"},el={class:"info"},tl={class:"cover"},ll=["src"],sl={class:"tA"},al=["title"],ol={key:0,class:"artists"},nl={key:0},il=["title"],ul={key:0},rl=["title"],cl={class:"like"},dl={class:"playerControl"},_l={class:"buttons"},vl={class:"state"},ml=me(()=>e("i",{class:"iconfont icon-shangyishou",title:"\u4E0A\u4E00\u9996"},null,-1)),pl=[ml],hl={key:0,class:"iconfont icon-bofang",id:"play",title:"\u64AD\u653E"},fl={key:1,class:"iconfont icon-zanting",id:"pause",title:"\u6682\u505C"},gl=me(()=>e("i",{class:"iconfont icon-xiayishou",title:"\u4E0B\u4E00\u9996"},null,-1)),yl=[gl],Cl={class:"progressBar"},kl={class:"currentTime"},Sl={class:"bar"},wl={class:"totalTime"},Ll={class:"otherOptions"},bl={class:"volume"},xl={class:"volumeControl"},$l={class:"download"},Fl=["href"],Dl=me(()=>e("i",{class:"iconfont icon-bofangliebiao",title:"\u64AD\u653E\u5217\u8868"},null,-1)),Bl=[Dl],El={class:"lyricPanel"},Il=M({setup(m){const t=oe();let s=H(()=>t.getters.getCurrentUrl),o=H(()=>t.getters.getCurrentSongId),y=g(""),F=g(et),p=g([]),D=g(),C=g(0),l=H(()=>t.getters.getCurrentPlaylist),_=g(),B=g(!1),w,f=g(!1),i=H(()=>t.getters.getFav);const b=H(()=>function(r){return i.value.some(c=>c.id==r)}),P=()=>{let r={id:o.value,title:y.value,artist:p.value,album:D.value,duration:C.value};t.commit("pushFav",r)},U=r=>{t.commit("removeFav",r)};let v=g(!1);const A=()=>{l.value.length!=0&&(v.value=!0,L.play())},R=()=>{v.value=!1,L.pause()},q=()=>{v.value===!0?R():A()},Z=()=>{if(l.value.length==0)return;let r=l.value.filter(k=>k.id==o.value),n=l.value.indexOf(r[0]),c=l.value.length;if(n==0){let k=l.value[c-1].url;t.commit("setCurrentUrl",k),t.commit("pushRecent",{id:l.value[c-1].id,title:l.value[c-1].title,artist:l.value[c-1].artist,type:"\u6B4C\u66F2",time:+new Date,url:k}),t.commit("setCurrentSongId",l.value[c-1].id)}else{let k=l.value[n-1].url;t.commit("setCurrentUrl",k),t.commit("pushRecent",{id:l.value[n-1].id,title:l.value[n-1].title,artist:l.value[n-1].artist,type:"\u6B4C\u66F2",time:+new Date,url:k}),t.commit("setCurrentSongId",l.value[n-1].id)}},ee=()=>{if(l.value.length==0)return;let r=l.value.filter(c=>c.id==o.value),n=l.value.indexOf(r[0]);if(n+1==l.value.length){let c=l.value[0].url;t.commit("setCurrentUrl",c),t.commit("pushRecent",{id:l.value[0].id,title:l.value[0].title,artist:l.value[0].artist,type:"\u6B4C\u66F2",time:+new Date,url:c}),t.commit("setCurrentSongId",l.value[0].id)}else{let c=l.value[n+1].url;t.commit("setCurrentUrl",c),t.commit("pushRecent",{id:l.value[n+1].id,title:l.value[n+1].title,artist:l.value[n+1].artist,type:"\u6B4C\u66F2",time:+new Date,url:c}),t.commit("setCurrentSongId",l.value[n+1].id)}},ne=()=>{let r=Math.floor(Math.random()*l.value.length);console.log(r);let n=l.value[r].url;t.commit("setCurrentUrl",n),t.commit("pushRecent",{id:l.value[r].id,title:l.value[r].title,artist:l.value[r].artist,type:"\u6B4C\u66F2",time:+new Date,url:n}),t.commit("setCurrentSongId",l.value[r].id)};let I=g(0);const ie=()=>{I.value<2?I.value+=1:(I.value=2)&&(I.value=0)};let te=g(!1);const Ce=()=>{te.value==!1?te.value=!0:te.value=!1};let W=g(0),N=g(0),K=g(0),L,T=g(.5);const ue=()=>{N.value=L.currentTime;let r=N.value/K.value*360;W.value=Math.floor(r),N.value==K.value&&(v.value=!1)};Q(()=>{Ee(),L=document.querySelector("#originplayer"),L.volume=T.value,L.addEventListener("loadedmetadata",()=>{Qe(o.value).then(E=>{if(y.value=E.songs[0].name,F.value=E.songs[0].al.picUrl,p.value=E.songs[0].ar,D.value=E.songs[0].al,C.value=E.songs[0].dt,y.value==null){let le=t.getters.getRecent[0];y.value=le.title,p.value=le.artist}}),Ze(o.value).then(E=>{_.value=E.lrc.lyric})}),L.addEventListener("play",()=>{v.value=!0,K.value=L.duration}),L.addEventListener("timeupdate",ue),L.addEventListener("ended",()=>{I.value===1?(N.value=0,L.loop=!0,L.currentTime=0,L.play()):I.value===0?l.value.length==1?(N.value=0,L.loop=!0,L.currentTime=0,L.play()):(L.loop=!1,ee()):I.value===2&&(L.loop=!1,ne())}),De(),Be(),w=document.querySelector(".lyricPanel");let r,n,c,k;w.addEventListener("mousedown",E=>{r=E.clientX,n=E.clientY,c=w.offsetLeft,k=w.offsetTop,f.value=!0}),document.addEventListener("mousemove",E=>{if(f.value==!1)return;let le=E.clientX,Ie=E.clientY,Pe=le-(r-c),Ae=Ie-(n-k);w.style.left=Pe+"px",w.style.top=Ae+"px"}),document.addEventListener("mouseup",E=>{f.value=!1})}),ve(()=>T.value,()=>{L.volume=T.value});const pe=r=>{let n=Math.floor(r/60),c=Math.floor(r%60);return n=n<10?"0"+n:n,c=c<10?"0"+c:c,n+":"+c},ke=r=>{N.value=K.value*(r/360),L.currentTime=N.value,L.addEventListener("timeupdate",ue)},Se=r=>{L.removeEventListener("timeupdate",ue),N.value=K.value*(r/360)},we=()=>{B.value===!0?B.value=!1:B.value=!0},Le=g(),be=()=>{xe(s.value)};async function xe(r){let n=await X({method:"get",url:r,responseType:"blob"}),c=window.URL.createObjectURL(n.data),k=document.createElement("a");k.href=c,k.download=p.value[0].name+"-"+y.value+".mp3",k.click(),k.remove(),window.URL.revokeObjectURL(c)}const $e=He("playlistDrawer"),Fe=()=>{$e.value.toggleShow()},De=()=>{let r=localStorage.getItem("myFav");if(r){let n=JSON.parse(r);n.length>0&&(t.state.myFavourite=n)}},Be=()=>{let r=localStorage.getItem("albumCollection");if(r){let c=JSON.parse(r);c.length>0&&(t.state.albumCollection=c)}let n=localStorage.getItem("artistCollection");if(n){let c=JSON.parse(n);c.length>0&&(t.state.artistCollection=c)}},Ee=()=>{window.addEventListener("beforeunload",()=>{localStorage.setItem("playState",JSON.stringify(I.value)),localStorage.setItem("playVolume",JSON.stringify(T.value))});let r=localStorage.getItem("playState"),n=localStorage.getItem("playVolume");if(r){let c=JSON.parse(r);I.value=c}if(n){let c=JSON.parse(n);T.value=c}};return(r,n)=>{const c=x("el-slider");return a(),u(V,null,[e("audio",{src:d(s),id:"originplayer",controls:"",autoplay:""},null,8,Qt),e("div",Zt,[e("div",el,[e("div",tl,[e("img",{src:d(F),alt:"\u5C01\u9762"},null,8,ll)]),e("div",sl,[e("div",{class:"title",title:d(y)},S(d(y)),9,al),d(p).length>0?(a(),u("div",ol,[d(p).length>1?(a(),u("div",nl,[(a(!0),u(V,null,J(d(p),(k,E)=>(a(),u("span",{key:k.id},[e("span",{class:"artist",title:k.name},S(k.name),9,il),E+1!==d(p).length?(a(),u("span",ul," \xA0/\xA0 ")):z("",!0)]))),128))])):(a(),u("span",{key:1,class:"artist",title:d(p)[0].name},S(d(p)[0].name),9,rl))])):z("",!0)]),e("div",cl,[d(b)(d(o))?(a(),u("i",{key:1,id:"loveIcon",class:"iconfont icon-aixin",title:"\u53D6\u6D88\u559C\u6B22",onClick:n[0]||(n[0]=k=>U(d(o)))})):(a(),u("i",{key:0,id:"loveIcon",class:"iconfont icon-aixin1-copy",title:"\u559C\u6B22",onClick:P}))])]),e("div",dl,[e("div",_l,[e("div",vl,[d(I)==0?(a(),u("i",{key:0,class:"iconfont icon-liebiaoxunhuan",onClick:ie,title:"\u5217\u8868\u5FAA\u73AF"})):d(I)==1?(a(),u("i",{key:1,class:"iconfont icon-danquxunhuan",onClick:ie,title:"\u5355\u66F2\u5FAA\u73AF"})):d(I)==2?(a(),u("i",{key:2,class:"iconfont icon-bofang-suijibofang",onClick:ie,title:"\u968F\u673A\u64AD\u653E"})):z("",!0)]),e("div",{class:"pre",onClick:Z},pl),e("div",{class:"playPause",onClick:q},[d(v)?(a(),u("i",fl)):(a(),u("i",hl))]),e("div",{class:"next",onClick:ee},yl),e("div",{class:"lyrics",onClick:we}," \u8BCD ")]),e("div",Cl,[e("div",kl,S(pe(d(N))),1),e("div",Sl,[h(c,{modelValue:d(W),"onUpdate:modelValue":n[1]||(n[1]=k=>ce(W)?W.value=k:W=k),"show-tooltip":!1,size:"small",max:360,step:1,onChange:ke,onInput:Se},null,8,["modelValue"])]),e("div",wl,S(pe(d(K))),1)])]),e("div",Ll,[e("div",bl,[e("i",{class:"iconfont icon-yinliang",onClick:Ce}),j(e("div",xl,[h(c,{modelValue:d(T),"onUpdate:modelValue":n[2]||(n[2]=k=>ce(T)?T.value=k:T=k),vertical:"",height:"80px","show-tooltip":!1,max:1,step:.01},null,8,["modelValue","step"])],512),[[Y,d(te)]])]),e("div",$l,[e("i",{class:"iconfont icon-xiazai",title:"\u4E0B\u8F7D",onClick:be}),j(e("a",{href:d(s),ref_key:"downloadBtn",ref:Le,target:"_blank"},null,8,Fl),[[Y,!1]])]),e("div",{class:"playlist",onClick:Fe},Bl)])]),j(e("div",El,[h(Gt,{dataList:d(_)},null,8,["dataList"])],512),[[Y,d(B)]])],64)}}});var Pl=O(Il,[["__scopeId","data-v-227966da"]]);const Al={class:"drawerLayout"},Ul={class:"playlistLayout"},Rl={class:"header"},Nl={class:"totalCount"},Tl={class:"playlist"},Vl=["onDblclick"],Ml=["title"],Ol={class:"artists"},Hl=["title"],Jl={class:"duration"},zl=["onClick"],Kl=M({setup(m,{expose:t}){ae();const s=oe(),o=g(!1),y=g("rtl"),F=()=>{o.value=!o.value},p=H(()=>s.getters.getCurrentPlaylist);let D=H(()=>s.getters.getCurrentSongId);const C=()=>{s.commit("clearPlaylist"),s.commit("setCurrentUrl","")},l=i=>{s.commit("setCurrentUrl",i.url),s.commit("pushRecent",{id:i.id,title:i.title,artist:i.artist,type:"\u6B4C\u66F2",time:+new Date,url:i.url}),s.commit("setCurrentSongId",i.id)},_=i=>{p.value.length==1?C():s.commit("deleteFromPlaylist",i)},B=i=>{let b=new Date(i),P=b.getMinutes();P=P<10?"0"+P:P;let U=b.getSeconds();return U=U<10?"0"+U:U,P+":"+U},w=()=>{window.addEventListener("beforeunload",()=>{sessionStorage.setItem("PlayList",JSON.stringify(p.value))});let i=sessionStorage.getItem("PlayList");if(i){let b=JSON.parse(i);b.length>0&&(s.state.currentPlaylist=b)}},f=async()=>{if(p.value.length!=0){for(let i=0;i<p.value.length;i++){let P=(await ge(p.value[i].id)).data[0].url;p.value[i].url=P}ze.alert("Url\u5237\u65B0\u5B8C\u6210\uFF0C\u8BF7\u91CD\u65B0\u53CC\u51FB\u64AD\u653E","\u63D0\u793A",{confirmButtonText:"OK",confirmButtonClass:"confirmBtn",customClass:"refreshMessageBox"})}};return Q(()=>{w()}),t({toggleShow:F}),(i,b)=>{const P=x("el-scrollbar"),U=x("el-drawer");return j((a(),u("div",Al,[h(U,{modelValue:o.value,"onUpdate:modelValue":b[0]||(b[0]=v=>o.value=v),title:"\u5F53\u524D\u64AD\u653E\u5217\u8868",direction:y.value,"lock-scroll":!1,modal:!1,size:420,"show-close":!1,"modal-class":"modal"},{default:$(()=>[e("div",Ul,[e("div",Rl,[e("div",Nl," \u5171"+S(d(s).state.currentPlaylist.length)+"\u9996 ",1),e("div",{class:"refresh",onClick:f}," \u5237\u65B0Url "),e("div",{class:"clearPlaylist",onClick:C}," \u6E05\u7A7A\u5217\u8868 ")]),e("div",Tl,[h(P,null,{default:$(()=>[e("ul",null,[(a(!0),u(V,null,J(d(p),(v,A)=>(a(),u("li",{class:Je(["playlistItem",{active:v.id==d(D)}]),key:v.id,onDblclick:R=>l(v)},[e("div",{class:"title",title:v.title},[e("span",null,S(v.title),1)],8,Ml),e("div",Ol,S(v.artist[0].name?v.artist[0].name:v.artist),1),e("div",{class:"from",title:"\u6765\u81EA\uFF1A"+v.from},S(v.from),9,Hl),e("div",Jl,S(B(v.duration)),1),e("div",{class:"delete",onClick:R=>_(v.id)}," \xD7 ",8,zl)],42,Vl))),128))])]),_:1})])])]),_:1},8,["modelValue","direction"])],512)),[[Y,o.value]])}}});var jl=O(Kl,[["__scopeId","data-v-1408bca4"]]);const ql={class:"common-layout"},Wl=M({setup(m){const t=g(),s=g();return Q(()=>{se("scrollBar",t),se("playlistDrawer",s)}),se("scrollBar",t),se("playlistDrawer",s),(o,y)=>{const F=x("el-header"),p=x("el-aside"),D=x("router-view"),C=x("el-scrollbar"),l=x("el-main"),_=x("el-container"),B=x("el-footer");return a(),u("div",ql,[h(F,{class:"header"},{default:$(()=>[h(Jt)]),_:1}),h(_,{class:"content"},{default:$(()=>[h(p,{width:"200px",class:"aside"},{default:$(()=>[h(jt)]),_:1}),h(l,{class:"main",id:"main"},{default:$(()=>[h(C,{ref_key:"scrollBar",ref:t},{default:$(()=>[h(D,null,{default:$(({Component:w})=>[(a(),G(je,{exclude:"songDetail"},[(a(),G(Ke(w)))],1024))]),_:1})]),_:1},512),h(jl,{ref_key:"playlistDrawer",ref:s},null,512)]),_:1})]),_:1}),h(B,{class:"footer"},{default:$(()=>[h(Pl)]),_:1})])}}});var ss=O(Wl,[["__scopeId","data-v-ed4dd384"]]);export{ss as default};
