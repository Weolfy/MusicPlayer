import{d as V,a as y,l as _,B as v,n as w,o as d,c as p,e as o,F as f,f as L,t as u,s as m,A as C,g as b,p as x,j as B,k as I,m as M}from"./index.3e4959b4.js";import{V as R}from"./VideoPlayer.3db68a0f.js";import{a as T}from"./play.0be1cf54.js";import{_ as D}from"./plugin-vue_export-helper.21dcd24c.js";import{h as N}from"./search.fc5bb9cc.js";import"./request.6f08c656.js";const P=c=>(x("data-v-32abb2e4"),c=c(),B(),c),E={class:"videoList"},F=["onClick"],$=P(()=>o("div",{class:"shadow"},null,-1)),j=["src"],A={class:"playCount"},q={class:"duration"},z={class:"videoTitle"},G={class:"videoUploader"},H={class:"playerComp"},J=V({setup(c){const a=y();_(!1);let n=_(!1),r=_(""),s=v([]);const h=v([]);w(()=>a.state.searchVideo.searchState,()=>{s=a.state.searchVideo.resultList,h.length=0;for(let e=0;e<s.length;e++)h.push({vid:s[e].vid,coverUrl:s[e].coverUrl,creator:s[e].creator,duration:s[e].durationms,playTime:s[e].playTime,title:s[e].title})});const S=e=>{let i=new Date(e),t=i.getMinutes();t=t<10?"0"+t:t;let l=i.getSeconds();return l=l<10?"0"+l:l,t+":"+l},g=e=>e<1e5?e:Math.round(e/1e4)+"\u4E07",k=e=>{T(e).then(i=>{console.log(i),r.value=i.urls[0].url}),n.value=!0},U=()=>{n.value=!1};return(e,i)=>(d(),p(f,null,[o("ul",E,[(d(!0),p(f,null,L(m(h),t=>(d(),p("li",{class:"videoItem",key:t.vid},[o("div",{class:"videoCover",onClick:l=>k(t.vid)},[$,o("img",{src:t.coverUrl,alt:"\u89C6\u9891\u5C01\u9762"},null,8,j),o("span",A,u(g(t.playTime)),1),o("span",q,u(S(t.duration)),1)],8,F),o("div",z,u(t.title),1),o("div",G," by "+u(t.creator[0].userName),1)]))),128))]),o("div",H,[m(n)?(d(),C(R,{key:0,videoUrl:m(r),onClose:U},null,8,["videoUrl"])):b("",!0)])],64))}});var K=D(J,[["__scopeId","data-v-32abb2e4"]]);const ee=V({setup(c){const a=y(),n=I();return _(!1),M(()=>{N(n.params.keywords).then(r=>{a.commit("searchVideo/setResultList",r.result.videos),a.commit("searchVideo/setVideoCount",r.result.videoCount),a.state.searchVideo.searchState=!a.state.searchVideo.searchState})}),(r,s)=>(d(),C(K))}});export{ee as default};
