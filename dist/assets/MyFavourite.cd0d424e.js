import{d as x,k as U,u as E,a as R,D as V,C as F,r as I,o as y,c as b,e as i,b as r,w as v,s as d,t as m,i as j,F as J,p as A,j as P,l as f,O as q,Q,m as z,L as G,q as H}from"./index.3e4959b4.js";import{d as C}from"./search.fc5bb9cc.js";import{d as K}from"./default.2e3a4730.js";import{g as $}from"./play.0be1cf54.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";import"./request.6f08c656.js";const W=u=>(A("data-v-4bcef2c6"),u=u(),P(),u),X={class:"buttons"},Y={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Z=W(()=>i("span",{class:"num"},null,-1)),L=["onClick"],ee=["onClick"],te=["title"],le=["title","onClick"],oe=["title","onClick"],se=x({props:["dataList"],setup(u){const _=u;U();const g=E(),o=R(),{dataList:e}=V(_),h=t=>{let n=new Date(t),l=n.getMinutes();l=l<10?"0"+l:l;let c=n.getSeconds();return c=c<10?"0"+c:c,l+":"+c},w=t=>{$(t.id).then(n=>{o.commit("setCurrentUrl",n.data[0].url),o.commit("pushRecent",{id:t.id,title:t.title,artist:t.artist,type:"\u6B4C\u66F2",time:+new Date}),o.commit("pushCurrentPlaylist",{id:t.id,title:t.title,artist:t.artist,from:"\u6B4C\u5355",duration:t.duration,url:n.data[0].url}),o.commit("setCurrentSongId",t.id)})},k=t=>{g.push("/detail/artist/"+t)},D=t=>{g.push("/detail/album/"+t)},a=t=>{let n={id:t.id,title:t.title,artist:t.artist,album:t.album,duration:h(t.duration)};o.commit("pushFav",n)},p=t=>{o.commit("removeFav",t)};let S=F(()=>o.getters.getFav);const O=F(()=>function(t){return S.value.some(l=>l.id==t)}),M=async()=>{o.commit("clearPlaylist");for(let t=0;t<(e==null?void 0:e.value.length);t++){let l=(await $(e==null?void 0:e.value[t].id)).data[0].url;o.commit("pushCurrentPlaylistOrder",{id:e==null?void 0:e.value[t].id,title:e==null?void 0:e.value[t].title,artist:e==null?void 0:e.value[t].artist,from:"\u6B4C\u5355",duration:e==null?void 0:e.value[t].duration,url:l}),t==0&&(o.commit("setCurrentUrl",l),o.commit("pushRecent",{id:e==null?void 0:e.value[t].id,title:e==null?void 0:e.value[t].title,artist:e==null?void 0:e.value[t].artist,type:"\u6B4C\u66F2",time:+new Date}),o.commit("setCurrentSongId",e==null?void 0:e.value[t].id))}},T=async()=>{for(let t=0;t<(e==null?void 0:e.value.length);t++){let l=(await $(e==null?void 0:e.value[t].id)).data[0].url;o.commit("pushCurrentPlaylistOrder",{id:e==null?void 0:e.value[t].id,title:e==null?void 0:e.value[t].title,artist:e==null?void 0:e.value[t].artist,from:"\u8BE6\u60C5",duration:e==null?void 0:e.value[t].duration,url:l})}};return(t,n)=>{const l=I("el-table-column"),c=I("el-table");return y(),b(J,null,[i("div",X,[i("div",{class:"button",onClick:n[0]||(n[0]=s=>M())},"\u5168\u90E8\u64AD\u653E"),i("div",{class:"button",onClick:n[1]||(n[1]=s=>T())},"\u6DFB\u52A0\u5230\u64AD\u653E\u5217\u8868")]),r(c,{data:d(e),stripe:"",style:{width:"100%"},"header-row-class-name":"tableheader",onRowDblclick:w},{default:v(()=>[r(l,{type:"index",index:1,width:"35"}),r(l,{label:"",width:"30",class:"icon"},{default:v(s=>[i("div",Y,[Z,d(O)(s.row.id)?(y(),b("i",{key:1,id:"loveIcon",class:"iconfont icon-aixin",title:"\u53D6\u6D88\u559C\u6B22",onClick:B=>p(s.row.id)},null,8,ee)):(y(),b("i",{key:0,id:"loveIcon",class:"iconfont icon-aixin1-copy",title:"\u559C\u6B22",onClick:B=>a(s.row)},null,8,L))])]),_:1}),r(l,{label:"\u97F3\u4E50\u6807\u9898",width:"260",class:"title"},{default:v(s=>[i("div",{title:s.row.title},m(s.row.title),9,te)]),_:1}),r(l,{label:"\u6B4C\u624B",width:"180","class-name":"artist"},{default:v(s=>[i("div",{title:s.row.artist[0].name,onClick:B=>k(s.row.artist[0].id)},m(s.row.artist[0].name),9,le)]),_:1}),r(l,{label:"\u4E13\u8F91",width:"120","class-name":"album"},{default:v(s=>[i("div",{title:s.row.album.name,onClick:B=>D(s.row.album.id)},m(s.row.album.name),9,oe)]),_:1}),r(l,{label:"\u65F6\u957F",width:"60",class:"duration"},{default:v(s=>[j(m(h(s.row.duration)),1)]),_:1})]),_:1},8,["data"])],64)}}});var ie=N(se,[["__scopeId","data-v-4bcef2c6"]]);const ne=u=>(A("data-v-5787616d"),u=u(),P(),u),ae={class:"songListLayout"},ue={class:"songListInfo"},re={class:"slcover"},ce=["src"],de={class:"info"},ve={class:"slname"},me={class:"playinfo"},_e={class:"songListDetail"},pe={class:"slsongs"},ge=ne(()=>i("div",{class:"title"}," \u6B4C\u66F2\u5217\u8868 ",-1)),he=x({setup(u){U(),E();const _=R();let g=f("\u6211\u559C\u6B22\u7684\u97F3\u4E50"),o=f(K),e=F(()=>_.getters.getFav),h=F(()=>_.getters.getFav.length);f(0);let w=f(!1);const k=()=>{C(e.value[0].id).then(a=>{console.log(a)})};q(()=>{e.value.length!=0&&C(e.value[0].id).then(a=>{o.value=a.songs[0].al.picUrl})}),Q(()=>{e.value.length!=0&&C(e.value[0].id).then(a=>{o.value=a.songs[0].al.picUrl})});const D=()=>{window.addEventListener("beforeunload",()=>{localStorage.setItem("myFav",JSON.stringify(e.value))});let a=localStorage.getItem("myFav");if(a){let p=JSON.parse(a);p.length>0&&(_.state.myFavourite=p)}};return z(()=>{D(),e.value.length!=0&&C(e.value[0].id).then(a=>{o.value=a.songs[0].al.picUrl})}),(a,p)=>{const S=G("loading");return H((y(),b("div",ae,[i("div",ue,[i("div",re,[i("img",{src:d(o),alt:"\u6B4C\u5355\u5C01\u9762",onClick:k},null,8,ce)]),i("div",de,[i("div",ve,m(d(g)),1),i("div",me," \u6B4C\u66F2: "+m(d(h)),1)])]),i("div",_e,[i("div",pe,[ge,r(ie,{dataList:d(e)},null,8,["dataList"])])])])),[[S,d(w)]])}}});var ke=N(he,[["__scopeId","data-v-5787616d"]]);export{ke as default};
