import{d as b,k as T,u as U,a as I,l as e,m as N,n as R,L as V,o as F,c as L,q as f,s as n,e as o,t as B,b as D}from"./index.83995d8d.js";import{g as P,a as A,C as k}from"./getComment.8adb95ff.js";import{P as j}from"./Pagination.2b18e9cd.js";import{d as w}from"./search.fc5bb9cc.js";import{g as q}from"./play.0be1cf54.js";import{_ as z}from"./plugin-vue_export-helper.21dcd24c.js";import"./request.6f08c656.js";const H={class:"detailPage"},M={class:"songInfo"},G={class:"icon"},J=["src"],K={class:"info"},O={class:"title"},Q={class:"album"},W={class:"artist"},X={class:"comment"},Y={class:"hotComment"},Z={class:"latestComment"},$=b({setup(tt){const a=T();U();const y=I();let d=e(""),u=e([]),i=e({}),v=e(""),_=e(!0);const g=e([]);let p=e(!0);const m=e([]);let l=e(!0),h=e(0),c=e(0);N(()=>{w(a.params.id).then(t=>{i.value=t.songs[0].al,u.value=t.songs[0].ar,d.value=t.songs[0].name,v.value=S(u.value),_.value=!1}),P(a.params.id,0).then(t=>{g.value=t.hotComments,p.value=!1}),A(a.params.id,0,1,20,3).then(t=>{m.value=t.data.comments,h.value=t.data.totalCount,c.value=t.data.cursor,l.value=!1})}),R(()=>a.params.id,()=>{w(a.params.id).then(t=>{i.value=t.songs[0].al,u.value=t.songs[0].ar,d.value=t.songs[0].name,v.value=S(u.value),_.value=!1}),P(a.params.id,0).then(t=>{g.value=t.hotComments,p.value=!1}),A(a.params.id,0,1,20,3).then(t=>{m.value=t.data.comments,h.value=t.data.totalCount,c.value=t.data.cursor,l.value=!1})});const S=t=>{if(t.length===1)return t[0].name;if(t.length>1){let s=[];for(let C=0;C<t.length;C++)s.push(t[C].name);return s.join(" / ")}else return"null"},x=t=>{l.value=!0,A(a.params.id,0,t,20,3,c.value).then(s=>{console.log(s),m.value=s.data.comments,c.value=s.data.cursor,l.value=!1})},E=()=>{q(a.params.id).then(t=>{const s=t.data[0].url;y.commit("setCurrentUrl",s)})};return(t,s)=>{const r=V("loading");return F(),L("div",H,[f((F(),L("div",M,[o("div",G,[o("img",{src:n(i).picUrl,alt:"\u6B4C\u66F2\u5C01\u9762",onClick:E},null,8,J)]),o("div",K,[o("div",O,B(n(d)),1),o("span",Q," \u4E13\u8F91\uFF1A "+B(n(i).name),1),o("span",W," \u6B4C\u624B\uFF1A "+B(n(v)),1)])])),[[r,n(_)]]),o("div",X,[o("div",Y,[f(D(k,{commentTitle:"\u70ED\u95E8\u8BC4\u8BBA",commentData:g.value},null,8,["commentData"]),[[r,n(p)]])]),o("div",Z,[f(D(k,{commentTitle:"\u6700\u65B0\u8BC4\u8BBA",commentData:m.value},null,8,["commentData"]),[[r,n(l)]]),D(j,{totalCount:n(h),pageSize:20,pagerCount:7,onPageChange:x},null,8,["totalCount"])])])])}}});var it=z($,[["__scopeId","data-v-56118311"]]);export{it as default};
